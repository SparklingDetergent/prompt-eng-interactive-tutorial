# 第7章: 例の使用（フューショットプロンプティング）

このドキュメントは `Anthropic 1P/07_Using_Examples_Few-Shot_Prompting.ipynb` の主要な概念を日本語で説明するものです。

## レッスン

**Claudeにどのように振る舞ってほしいか（またはどのように振る舞ってほしくないか）の例を示すことは、以下の点で非常に効果的です：**
- 正しい答えを得る
- 正しいフォーマットで答えを得る

このようなプロンプティングは「**フューショットプロンプティング**（few-shot prompting）」とも呼ばれます。「ゼロショット（zero-shot）」、「Nショット（n-shot）」、または「ワンショット（one-shot）」という言葉に出会うこともあるかもしれません。「ショット」の数は、プロンプト内で使用される例の数を指します。

- **ゼロショット:** 例なし。指示のみ。
- **ワンショット:** 1つの例。
- **フューショット:** 通常2〜5つ程度の複数の例。

### 例

**例1: 親の代わりに応答するボット（トーンの調整）**

あなたが子供からの質問に応答する「親ボット」を開発しようとしているとします。**Claudeのデフォルトの応答は非常にフォーマルでロボット的です。** これでは子供の心を傷つけてしまいます。

初期プロンプト（ゼロショット）：
```
User: サンタさんはクリスマスにプレゼントを持ってきてくれる？
```
Claudeの応答：（「サンタクロースは伝統的なクリスマスのキャラクターであり…」のようなフォーマルな回答になる可能性が高い）

望ましいトーンを詳細に説明する時間を取ることもできますが、**Claudeに理想的な応答の例をいくつか示す**方がはるかに簡単です。

フューショットプロンプト：
```json
[
  {"role": "user", "content": "「A」として次の行を書いて会話を完成させてください。\nQ: 歯の妖精は本当にいるの？\nA: もちろんだよ、坊や。歯を包んで今夜枕の下に置いてごらん。朝には何か待っているかもしれないよ。\nQ: サンタさんはクリスマスにプレゼントを持ってきてくれる？"},
  {"role": "assistant", "content": "A: もちろんだとも、お嬢ちゃん。一年間良い子にしていたなら、サンタさんはきっと素敵なプレゼントをたくさん持ってきてくれるはずだよ。"}
]
```
最後のユーザーの質問「サンタさんはクリスマスにプレゼントを持ってきてくれる？」に対して、Claudeは提供された例（歯の妖精の質問とその優しい回答）のトーンとスタイルを模倣して応答します。

**例2: 情報の抽出とフォーマット**

次のフォーマット例では、名前と職業を抽出し、それらを望む通りにフォーマットするための一連のフォーマット指示をClaudeにステップバイステップで説明することもできますが、**Claudeにいくつかの正しくフォーマットされた例を提供し、Claudeがそこから推定する**方が簡単です。

フューショットプロンプト（複数の例と最後の処理対象テキストを含む）：
```
User:
Silvermist Hollowという魅力的な村には、並外れた個人のグループが住んでいました。
その中には、地域医療センターで手術技術を革新した神経外科医のリアム・パテル博士がいました。
オリビア・チェンは革新的な建築家で、持続可能で見事なデザインで村の景観を変えました。
地元の劇場は、プロの音楽家であり作曲家でもあるイーサン・コヴァーチの魅力的な交響曲で飾られました。
イザベラ・トーレスは、地元の食材への情熱を持つ独学のシェフで、彼女のファーム・トゥ・テーブルのレストランで料理のセンセーションを巻き起こし、食通にとって必見の場所となりました。
これらの注目すべき個人は、それぞれが異なる才能を持ち、Silvermist Hollowの活気に満ちた生活のタペストリーに貢献しました。
<individuals>
1. Dr. Liam Patel [NEUROSURGEON]
2. Olivia Chen [ARCHITECT]
3. Ethan Kovacs [MUSICIAN AND COMPOSER]
4. Isabella Torres [CHEF]
</individuals>

町の中心部では、シェフのオリバー・ハミルトンがファーム・トゥ・テーブルのレストラン「グリーンプレート」で料理シーンを変革しました。オリバーの地元産の有機食材へのこだわりは、評論家や地元の人々から絶賛されています。
通りを少し下ると、リバーサイドグローブ図書館があり、そこでは司書長のエリザベス・チェンがすべての人にとって歓迎的で包括的な空間を作るために熱心に取り組んできました。彼女の図書館の提供内容を拡大し、子供たちのための読書プログラムを確立する努力は、町の識字率に大きな影響を与えました。
魅力的な町の広場を散策すると、壁を飾る美しい壁画に魅了されるでしょう。これらの傑作は、リバーサイドグローブの本質を捉える才能で町に命を吹き込んだ著名な芸術家、イザベラ・トーレスの作品です。
リバーサイドグローブの運動競技の成果も注目に値します。元オリンピック水泳選手でコーチに転身したマーカス・ジェンキンスのおかげです。マーカスは彼の経験と情熱を活かして町の若者を指導し、リバーサイドグローブ水泳チームをいくつかの地域選手権に導きました。
<individuals>
1. Oliver Hamilton [CHEF]
2. Elizabeth Chen [LIBRARIAN]
3. Isabella Torres [ARTIST]
4. Marcus Jenkins [COACH]
</individuals>

オークバレーという魅力的な小さな町には、そのスキルと献身がコミュニティに永続的な影響を与えた注目すべき3人の個人が住んでいます。
町の賑やかなファーマーズマーケットでは、美味しくて持続可能な方法で栽培された農産物で知られる情熱的な有機農家のローラ・シモンズを見つけることができます。健康的な食事を推進する彼女の献身は、町がより環境に配慮したライフスタイルを受け入れるきっかけとなりました。
オークバレーのコミュニティセンターでは、熟練したダンスインストラクターであるケビン・アルバレスが、あらゆる年齢の人々に動きの喜びをもたらしました。彼の包括的なダンスクラスは、住民の間に一体感と自己表現の感覚を育み、地域の芸術シーンを豊かにしました。
最後に、たゆまぬボランティアであるレイチェル・オコナーは、さまざまな慈善活動に時間を捧げています。他者の生活を改善するという彼女のコミットメントは、オークバレー内に強いコミュニティ意識を育む上で不可欠な役割を果たしてきました。
ローラ、ケビン、レイチェルは、そのユニークな才能と揺るぎない献身を通じて、オークバレーの構造に織り込まれ、活気に満ちた繁栄する小さな町を作る手助けをしています。
```
Assistant (prefill):
```
<individuals>
```
Claudeは、提供された例のパターン（テキストブロックから名前と職業を抽出し、特定のフォーマットでリスト化する）を学習し、最後のオークバレーのテキストに対しても同様のリストを生成します。`assistant`ターンで `<individuals>` をプリフィルすることで、Claudeが正しいフォーマットで開始するのを助けます。

## 重要なポイント
- **例の質と一貫性:** 提供する例は高品質で、期待する出力パターンを一貫して示す必要があります。
- **例の数:** 少なすぎるとパターンを学習できない可能性があり、多すぎるとプロンプトが長くなりすぎる可能性があります。「フューショット」（2〜5例）が一般的に良い出発点です。
- **明確な区切り:** ユーザーの質問（入力）とアシスタントの回答（期待される出力）の区別を明確にします。
- **最後の入力:** 最後の例の後に、Claudeに処理させたい実際の質問やデータを配置します。

## まとめ
この章では、フューショットプロンプティング、つまりClaudeにタスクの例を示すことの力を学びました。これは、特定のトーン、スタイル、または複雑な出力フォーマットをClaudeに教えるのに特に有効な方法です。指示を詳細に記述する代わりに、望ましい入力と出力のペアをいくつか示すことで、Claudeはパターンを効果的に学習し、新しい入力に適用することができます。
